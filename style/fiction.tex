%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Paper and Margins
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\output{\facingpages}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Page Frame (Headline and Footline)
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\def\normalpageheadline{\ifodd\pageno\normaloddpageheadline\else\normalevenpageheadline\fi}
\def\normalpagefootline{\line{}}
\def\normaloddpageheadline{\headlinefont\uppercase\expandafter{\title}\hfil\folio}
\def\normalevenpageheadline{\headlinefont\folio\hfil\uppercase\expandafter{\author}}
\def\displaypageheadline{\line{}}
\def\displaypagefootline{\hfil\headlinefont\folio\hfil}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Pages
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Title page:     \titlepage{title}{author}{publisher}
% Halftitle page: \titlepage{title}{}{}
\def\titlepage#1#2#3{
  \nextoddpage
  \useemptypageframe
  \null\vskip5\baselineskip
  \titlepagetitle{#1}
  \vfill
  \titlepageauthor{#2}
  \vfill
  \titlepagepublisher{#3}
  \vskip5\baselineskip\null
  \eject
}

\def\titlepagetitle#1{{\titlepagetitlefont\baselineskip=\fontdimen6\titlepagetitlefont\raggedleft\uppercase{#1}\par}}
\def\titlepageauthor#1{{\titlepageauthorfont\raggedleft\uppercase{#1}\par}}
\def\titlepagepublisher#1{\rightline{#1}}

\def\previewannouncementpage{
  \nextoddpage
  \line{}\vfill
  \centerline{\linelogo{20pt}}
  \vskip\baselineskip
  \centerline{\sectiontitlefont proudly announces}
  \vfill
  {\titlepagetitlefont\baselineskip=\fontdimen6\titlepagetitlefont\centered\previewtitle\par}
  \vskip\baselineskip
  \centerline{by}
  \vskip\baselineskip
  \centerline{\titlepageauthorfont\previewauthor}
  \vfill
  \centerline{Turn the page for a preview}
  \vfill
}
\def\previewpage{\nextoddpage}
\def\previewavailablepage{
  \nextoddpage
  \line{}\vfill
  \line{\hss{\titlepagetitlefont\baselineskip=\fontdimen6\titlepagetitlefont\previewtitle}\hss}
  \vskip\baselineskip
  \centerline{by}
  \vskip\baselineskip
  \centerline{\titlepageauthorfont\previewauthor}
  \vfill
  \centerline{Available now from your favorite retailer}
  \vfill
  \centerline{\linelogo{20pt}}
  \vfill
}

\raggedbottom




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Fonts
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\def\bodyfontfamily{Minion Pro}
\def\headlinefontfamily{Optima nova LT Pro}
\def\displayfontfamily{Optima nova LT Pro Titling Initials}

\newdimen\bodyfontsize \bodyfontsize=11pt
\newdimen\bodysmallfontsize \bodysmallfontsize=10pt
\newdimen\leading \leading=15pt

\newdimen\headlinefontsize \headlinefontsize=8pt
\newdimen\titlepagetitlefontsize \titlepagetitlefontsize=30pt
\newdimen\titlepageauthorfontsize \titlepageauthorfontsize=24pt
\newdimen\titlepagepublisherfontsize \titlepagepublisherfontsize=16pt

\newdimen\aheadsize \aheadsize=24pt
\newdimen\bheadsize \bheadsize=14pt

% Headline and Footline Fonts
\makefont{\headlinefont}{\headlinefontfamily}{\headlinefontsize}{:+cpsp}
\def\footlinefont{\headlinefont}

% Heading and Title Fonts
\makefont{\titlepagetitlefont}{\displayfontfamily}{\titlepagetitlefontsize}{:+cpsp}
\makefont{\titlepageauthorfont}{\displayfontfamily}{\titlepageauthorfontsize}{:+cpsp}
\makefont{\chaptertitlefont}{\displayfontfamily}{\aheadsize}{:+smcp}
\makefont{\sectiontitlefont}{\displayfontfamily}{\bheadsize}{:+smcp}
\makefont{\infoheadingfont}{\displayfontfamily}{\bodysmallfontsize}{:+cpsp}

% Text Fonts
\makefont{\bodyrm}{\bodyfontfamily}{\bodyfontsize}{:+nrml}
\makefont{\bodyit}{\bodyfontfamily}{\bodyfontsize}{/I}
\makefont{\bodysc}{\bodyfontfamily}{\bodyfontsize}{:+smcp}
\makefont{\bodysmallfont}{\bodyfontfamily}{\bodysmallfontsize}{}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Paragraphs and Lines
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Paragraphs
\def\leadin#1{\noindent{\bodysc#1}}
\parindent=1em

% Lines
\normalbaselineskip=\leading
\normalbaselines
\emergencystretch=1.5em

% Body font
\bodyrm
